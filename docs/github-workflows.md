# GitHub Workflows & CI/CD Plan

> **Generated by Cursor AI Assistant**
> 
> **Last Updated:** {{date}}

---

## ğŸ¯ Objective
Establish a robust, maintainable CI/CD pipeline for the prolinkli-app project, leveraging GitHub Actions to automate build, test, and deployment for both frontend and backend components.

---

## ğŸ—ï¸ Architecture Overview

- **Frontend (Angular):**
  - Built and tested in CI.
  - Deployed as static files to the server's web root (served by Nginx/Apache or similar).
  - No Docker containerization for the frontend.

- **Backend (Java/Spring Boot):**
  - Built and tested in CI.
  - Packaged as a Docker image and deployed using Docker Compose.
  - Runs alongside a Postgres container.

- **Secrets Management:**
  - Backend secrets are managed via Vault scripts and injected as environment variables or mounted files in the backend container.

---

## ğŸš¦ Workflow Summary

### 1. Frontend Workflow
- **Trigger:** On push to `develop` branch.
- **Steps:**
  1. Checkout code
  2. Set up Node.js
  3. Install dependencies (`npm ci`)
  4. Run tests (`npm test`)
  5. Build Angular app (`npm run build`)
  6. Deploy `dist/` to server web root via `rsync` or `scp`
- **Deployment:**
  - The server serves the static files directly (no Docker for frontend).

### 2. Backend Workflow
- **Trigger:** On push to `develop` branch.
- **Steps:**
  1. Checkout code
  2. Set up JDK 21
  3. Run backend tests (e.g., `./mvnw test` or `./backend/start-dev.sh`)
  4. Build Docker image for backend
  5. (Optional) Push Docker image to registry
  6. SSH to server and run `docker-compose -f docker-compose.develop.yml up -d --build`
- **Deployment:**
  - Backend runs as a Docker container, orchestrated with Postgres using Docker Compose.

### 3. Secrets (Vault)
- Vault scripts in `backend/bash/vault/` are used to fetch and inject secrets for the backend.
- Ensure secrets are available to the backend container at runtime (via env vars or mounted files).

---

## ğŸ’¡ Rationale
- **Frontend as Static Files:**
  - Static files are lightweight, fast, and best served by a web server.
  - No need for Docker unless you require dynamic scaling or containerized delivery.
- **Backend in Docker:**
  - Ensures consistent environment, easy dependency management, and isolation.
  - Simplifies orchestration with Postgres and future scalability.
- **Separation of Concerns:**
  - Each component is deployed in the most efficient and maintainable way.

---

## ğŸ“ Example Directory Structure

```
prolinkli-app/
  backend/
    Dockerfile
    ...
  frontend/
    ...
  docker-compose.develop.yml
  docs/
    github-workflows.md
  .github/
    workflows/
      backend-develop.yml
      frontend-develop.yml
```

---

## ğŸ”— References
- [GitHub Actions Documentation](https://docs.github.com/en/actions)
- [Docker Compose Documentation](https://docs.docker.com/compose/)
- [Angular Deployment Guide](https://angular.io/guide/deployment)

---

**Implementation Status:** âœ… Complete  
**Review Required:** Yes (by DevOps/Lead Developer) 